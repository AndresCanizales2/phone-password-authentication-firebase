webpackJsonp([1],{"+U0J":function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("7+uW"),a=o("Sazm"),s=o.n(a),r={name:"app",props:["user"],methods:{signout(){s.a.auth().signOut(),this.$router.push({path:"/"}),window.location.reload()}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[null!=e.user?o("h3",[e._v("\n    You are Logged In By Phone No - "+e._s(e.user.phoneNumber)+"\n    "),o("button",{on:{click:function(t){e.signout()}}},[e._v("signout")])]):o("h3",[e._v("You are Not Logged In ! "),o("br"),e._v(" "),o("router-link",{attrs:{to:"/"}},[e._v("Login")]),e._v(" "),o("router-link",{attrs:{to:"/signup"}},[e._v("Signup")])],1),e._v(" "),o("router-view")],1)},staticRenderFns:[]},u=o("VU/8")(r,i,!1,function(e){o("+U0J")},null,null).exports,p=o("/ocq"),l={data:()=>({phNo:"",appVerifier:"",otp:""}),methods:{sendOtp(){if(10!=this.phNo.length)alert("Invalid Phone Number Format !");else{let e="+91"+this.phNo,t=this.appVerifier;s.a.auth().signInWithPhoneNumber(e,t).then(function(e){window.confirmationResult=e,alert("SMS sent")}).catch(function(e){alert("Error ! SMS not sent")})}},verifyOtp(){if(10!=this.phNo.length||6!=this.otp.length)alert("Invalid Phone Number/OTP Format !");else{let e=this,t=this.otp;window.confirmationResult.confirm(t).then(function(t){t.user;e.$router.push({path:"/setPassword"})}).catch(function(e){})}},initReCaptcha(){setTimeout(()=>{window.recaptchaVerifier=new s.a.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){},"expired-callback":function(){}}),this.appVerifier=window.recaptchaVerifier},1e3)}},created(){this.initReCaptcha()}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v("SignUp")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.phNo,expression:"phNo"}],attrs:{type:"number",placeholder:"Phone Number"},domProps:{value:e.phNo},on:{input:function(t){t.target.composing||(e.phNo=t.target.value)}}}),e._v(" "),o("button",{attrs:{id:"sign-in-button"},on:{click:e.sendOtp}},[e._v("Get OTP")]),e._v(" "),o("div",{attrs:{id:"recaptcha-container"}}),o("br"),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.otp,expression:"otp"}],attrs:{type:"number",placeholder:"OTP"},domProps:{value:e.otp},on:{input:function(t){t.target.composing||(e.otp=t.target.value)}}}),e._v(" "),o("button",{on:{click:e.verifyOtp}},[e._v("Verify")]),o("br"),e._v(" "),o("button",{on:{click:function(t){e.sendOtp()}}},[e._v("Resend OTP")])])},staticRenderFns:[]},c=o("VU/8")(l,d,!1,null,null,null).exports,h={data:()=>({phNo:"",password:""}),methods:{login(){let e=this,t="+91"+this.phNo+"@domainName.com",o=this.password;s.a.auth().signInWithEmailAndPassword(t,o).then(function(){e.$router.push({path:"/home"})}).catch(function(e){e.code,e.message;let t=e.message.toLowerCase();for(;-1!=t.indexOf("email");)t=t.replace("email address","phone number");alert("Error: "+t)})}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v("Login")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.phNo,expression:"phNo"}],attrs:{type:"number",placeholder:"phone Number"},domProps:{value:e.phNo},on:{input:function(t){t.target.composing||(e.phNo=t.target.value)}}}),o("br"),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{placeholder:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),o("br"),e._v(" "),o("button",{on:{click:e.login}},[e._v("Login")])])},staticRenderFns:[]},v=o("VU/8")(h,m,!1,null,null,null).exports,g={data:()=>({password:"",password_2:""}),methods:{setPassword(){if(this.password!=this.password_2)alert("Password did not match !");else if(6!=this.password.length)alert("Password too small ! Lenght of Password should be atleast 6 !");else{let t=this;var e=s.a.auth().currentUser;let o=s.a.auth().currentUser.phoneNumber+"@domainName.com",n=this.password;e.updateEmail(o).then(function(){e.updatePassword(n).then(function(){alert("//Password Set successfully ! You can now Login with PHONE & PASSWORD !"),t.$router.push("/home")}).catch(function(e){alert("Error :"+e.message)})}).catch(function(e){"auth/requires-recent-login"==e.code&&(alert("Your Session has been Expired to Set Password ! Please try again !"),t.signout())})}},signout(){s.a.auth().signOut(),this.$router.push({path:"/"}),window.location.reload()}}},w={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v("Set Password")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{placeholder:"Enter Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),o("br"),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.password_2,expression:"password_2"}],attrs:{placeholder:"Re-enter Password"},domProps:{value:e.password_2},on:{input:function(t){t.target.composing||(e.password_2=t.target.value)}}}),o("br"),e._v(" "),o("button",{on:{click:e.setPassword}},[e._v("Set Password")])])},staticRenderFns:[]},f=o("VU/8")(g,w,!1,null,null,null).exports,_={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h2",[this._v("Application Home !")])])}]},b=o("VU/8")(null,_,!1,null,null,null).exports;n.a.use(p.a);var N=new p.a({mode:"history",routes:[{path:"/",name:"Login",component:v},{path:"/signup",name:"Signup",component:c},{path:"/setPassword",name:"Set Password",component:f},{path:"/home",name:"Home",component:b}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:N,template:'<App :user="user" ></App>',components:{App:u},data:()=>({user:{}}),methods:{getLoginStatus(){let e=this;s.a.auth().onAuthStateChanged(function(t){t?(e.user=t,console.log("// User is signed in by Phone Number : ",t.phoneNumber)):(e.user=null,console.log("// No user is signed in."))})},initFirebase(){s.a.initializeApp({apiKey:"AIzaSyAkx2NHZgmP9-Kr9a4dDN-xUqjm_CLvPhk",authDomain:"phonepassword-auth.firebaseapp.com",databaseURL:"https://phonepassword-auth.firebaseio.com",projectId:"phonepassword-auth",storageBucket:"phonepassword-auth.appspot.com",messagingSenderId:"754975497400"})}},updated(){this.getLoginStatus()},created(){this.initFirebase(),this.getLoginStatus()}})}},["NHnr"]);
//# sourceMappingURL=app.8197586c43a43cddfdf0.js.map